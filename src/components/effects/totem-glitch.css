.totem {
  position: relative;
  width: 180px;
  height: 480px;
  pointer-events: none;
  overflow: visible;
}

/* =======================
   BASE IMAGE
======================= */

.totem-img {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  object-fit: contain;
}

.base {
  z-index: 1;
  animation: none;
}

/* =======================
   RGB LAYERS
======================= */

.red,
.blue {
  opacity: 0;
  mix-blend-mode: screen;
  will-change: transform, clip-path, opacity;
}

/* =======================
   GLITCH ACTIVE
======================= */

.glitch-active .base {
  animation: base-drop 0.12s infinite steps(1, end);
}

.glitch-active .red {
  z-index: 2;
  opacity: 1;
  filter: drop-shadow(-6px 0 red);
  animation:
    red-jump 0.16s infinite steps(1, end),
    red-slices 0.45s infinite steps(1, end);
}

.glitch-active .blue {
  z-index: 3;
  opacity: 1;
  filter: drop-shadow(6px 0 cyan);
  animation:
    blue-jump 0.14s infinite steps(1, end),
    blue-slices 0.5s infinite steps(1, end);
}

/* =======================
   HARD JUMPS (TELEPORT)
======================= */

@keyframes red-jump {
  0%   { transform: translate(-14px, -6px); }
  10%  { transform: translate(-2px, 8px); }
  20%  { transform: translate(-18px, -2px); }
  30%  { transform: translate(-6px, -10px); }
  40%  { transform: translate(-22px, 6px); }
  50%  { transform: translate(-4px, 0); }
  60%  { transform: translate(-16px, -8px); }
  70%  { transform: translate(-10px, 10px); }
  80%  { transform: translate(-20px, -4px); }
  90%  { transform: translate(-6px, 4px); }
  100% { transform: translate(-14px, -6px); }
}

@keyframes blue-jump {
  0%   { transform: translate(14px, 6px); }
  10%  { transform: translate(22px, -4px); }
  20%  { transform: translate(6px, 12px); }
  30%  { transform: translate(18px, 0); }
  40%  { transform: translate(10px, -10px); }
  50%  { transform: translate(26px, 4px); }
  60%  { transform: translate(8px, -12px); }
  70%  { transform: translate(20px, 8px); }
  80%  { transform: translate(4px, 0); }
  90%  { transform: translate(16px, -6px); }
  100% { transform: translate(14px, 6px); }
}

/* =======================
   VIOLENT SLICE TEARING
======================= */

@keyframes red-slices {
  0%   { clip-path: inset(2% 0 85% 0); }
  12%  { clip-path: inset(30% 0 40% 0); }
  25%  { clip-path: inset(10% 0 60% 0); }
  37%  { clip-path: inset(55% 0 20% 0); }
  50%  { clip-path: inset(20% 0 50% 0); }
  62%  { clip-path: inset(65% 0 10% 0); }
  75%  { clip-path: inset(35% 0 35% 0); }
  87%  { clip-path: inset(8% 0 75% 0); }
  100% { clip-path: inset(2% 0 85% 0); }
}

@keyframes blue-slices {
  0%   { clip-path: inset(75% 0 5% 0); }
  12%  { clip-path: inset(45% 0 40% 0); }
  25%  { clip-path: inset(15% 0 65% 0); }
  37%  { clip-path: inset(60% 0 20% 0); }
  50%  { clip-path: inset(30% 0 45% 0); }
  62%  { clip-path: inset(10% 0 75% 0); }
  75%  { clip-path: inset(55% 0 25% 0); }
  87%  { clip-path: inset(25% 0 55% 0); }
  100% { clip-path: inset(75% 0 5% 0); }
}

/* =======================
   SIGNAL LOSS / FLICKER
======================= */

@keyframes base-drop {
  0%   { opacity: 1; }
  20%  { opacity: 0.4; }
  40%  { opacity: 1; }
  60%  { opacity: 0.25; }
  80%  { opacity: 1; }
  100% { opacity: 0.6; }
}
